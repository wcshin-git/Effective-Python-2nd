## Better way 10. 대입식을 사용해 반복을 피하라

대입식은 영어로 assignment expression이며 왈러스 연산자(walrus operator)라고도 부른다. 이 대입식은 파이썬 언어에서 고질적인 코드 중복 문제를 해결하고자 파이썬 3.8에서 새롭게 도입된 구문이다. 일반 대입문(assignment statement)은 a = b라고 쓰며 'a 이퀄 b'라고 읽지만, 왈러스 연산자는 a := b라고 쓰며 'a 왈러스 b'라고 읽는다. (왈러스라는 이름은 :=이 바다코끼리(walrus)의 눈과 엄니처럼 보이기 때문에 붙여졌다)

대입식은 대입문이 쓰일 수 없는 위치에서 변수에 값을 대입할 수 있으므로 유용하다. 예를 들어 if 문의 조건식 안에서 대입식을 쓸 수 있다. 다음의 두 코드를 비교해보자.

```python
# 1. 일반
count = fresh_fruit.get('사과', 0)
if count >= 4:
    make_cider(count)
else:
    out_of_stock()

# 2. 왈러스 연산자 사용
if (count := fresh_fruit.get('사과', 0)) >= 4:
    make_cider(count)
else:
    out_of_stock()
```

1번 코드는 count대입이 변수를 쓸데없이 너무 강조함. 반면 2번 코드는 count가 if 문의 첫 번째 블록에서만 의미가 있다는 점이 명확히 보이기 때문에 이 코드가 더 읽기 쉽다. 대입 연산자는 우선 count 변수에 값을 대입하고, if문의 맥락에서 대입된 값을 평가해 프로그램 흐름을 어떻게 제어할지 판단한다. 이런 두 단계의 동작(대입 후 평가)이 왈러스 연산자의 핵심이다.

**기억해야 할 내용**
- 대입식에서는 왈러스 연산자(:=)를 사용해 하나의 식 안에서 변수 이름에 값을 대입하면서 이 값을 평가할 수 있고, 중복을 피할 수 있다.
- 대입식이 더 큰 식의 일부분으로 쓰일 때는 괄호로 둘러싸야 한다.
- 파이썬에서는 switch/case문이나 do/while 루프를 쓸 수 없지만, 대입식을 사용하면 이런 기능을 더 깔끔하게 흉내 낼 수 있다.